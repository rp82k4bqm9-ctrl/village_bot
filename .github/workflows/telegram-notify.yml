name: Telegram Notify

on:
  push:
    branches: [main, master]
  deployment_status:

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send to Telegram (on push)
        if: github.event_name == 'push'
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TG_CHAT }}
          token: ${{ secrets.TG_TOKEN }}
          message: |
            üöÄ –ü—É—à –≤ main!
            
            –ê–≤—Ç–æ—Ä: ${{ github.actor }}
            –°–æ–æ–±—â–µ–Ω–∏–µ: ${{ github.event.head_commit.message }}
      
      - name: Send to Telegram (on deploy)
        if: github.event_name == 'deployment_status'
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TG_CHAT }}
          token: ${{ secrets.TG_TOKEN }}
          message: |
            ‚úÖ –î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à—ë–Ω!
            
            –°—Ç–∞—Ç—É—Å: ${{ github.event.deployment_status.state }}
            –°—Å—ã–ª–∫–∞: ${{ github.event.deployment_status.target_url }}
